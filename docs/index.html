<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ising Model Simulation</title>
    <style>
      body { background: #222; min-height: 100vh; margin: 0; }
      .main-content { display: flex; flex-direction: column; align-items: center; margin-top: 32px; }
      canvas { image-rendering: pixelated; border: 2px solid white; width: 400px; height: 400px; }
    </style>
  </head>
  <body>
  <h1 style="color: white; text-align: center; margin-top: 32px; font-size: 2.5em; font-family: 'Arial', sans-serif; letter-spacing: 2px;">Ising Model Simulation</h1>
  <div class="main-content">
  <label for="temp-slider" style="color: white; margin-bottom: 8px;">Temperature: 
    <input type="number" id="temp-value" min="0.1" max="5.0" step="0.01" value="2.27" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="temp-slider" min="0.1" max="5.0" step="0.01" value="2.27" style="width: 300px; margin-bottom: 16px;">
  <label for="j-slider" style="color: white; margin-bottom: 8px;">Coupling J: 
    <input type="number" id="j-value" min="-2.0" max="2.0" step="0.01" value="1.0" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="j-slider" min="-2.0" max="2.0" step="0.01" value="1.0" style="width: 300px; margin-bottom: 16px;">
  <label for="h-slider" style="color: white; margin-bottom: 8px;">External Field h: 
    <input type="number" id="h-value" min="-2.0" max="2.0" step="0.01" value="0.0" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="h-slider" min="-2.0" max="2.0" step="0.01" value="0.0" style="width: 300px; margin-bottom: 16px;">
      <label for="lattice-size" style="color: white; margin-bottom: 8px;">Lattice Size:
        <select id="lattice-size" style="margin-left: 8px;">
          <option value="8">8x8</option>
          <option value="16">16x16</option>
          <option value="32">32x32</option>
          <option value="64" selected>64x64</option>
          <option value="128">128x128</option>
          <option value="256">256x256</option>
          <option value="512">512x512</option>
        </select>
      </label>
      <label for="algorithm" style="color: white; margin-bottom: 8px;">Algorithm:
        <select id="algorithm" style="margin-left: 8px;">
          <option value="metropolis" selected>Metropolis</option>
          <option value="wolff">Wolff</option>
          <!-- <option value="swendsen-wang">Swendsen-Wang (BROKEN) </option> -->
          <option value="heat-bath">Heat Bath</option>
          <option value="glauber">Glauber</option>
          <option value="kawasaki">Kawasaki</option>
        </select>
      </label>
  <label for="skip-slider" style="color: white; margin-bottom: 8px;">Sweeps per frame: <span id="skip-value">1</span></label>
  <input type="range" id="skip-slider" min="1" max="20" step="1" value="1" style="width: 300px; margin-bottom: 16px;">
  <button id="reset-btn" style="display: block; margin: 0 auto 16px auto;">Reset</button>
  <button id="reset-data-btn" style="display: block; margin: 0 auto 16px auto;">Reset Data</button>
  <div style="display: flex; flex-direction: row; align-items: flex-start; gap: 24px; margin-top: 16px;">
    <canvas id="canvas"></canvas>
    <div style="display: flex; flex-direction: column; align-items: center;">
      <canvas id="live-plot" width="400" height="400" style="width: 400px; height: 400px; background: #111; border: 2px solid white;"></canvas>
      <div style="display: flex; flex-direction: column; align-items: center; margin-top: 8px;">
        <label id="plot-label" style="color: white; margin-bottom: 8px;">
          Plot:
          <select id="plot-type" style="margin-left: 8px;">
            <option value="energy" selected>Energy per Site</option>
            <option value="magnetization">Magnetization per Site</option>
            <option value="acceptance_ratio">Acceptance Ratio</option>
            <option value="no_plot">None (Disable Plot)</option>
          </select>
        </label>
  <span style="color: white; font-family: 'Courier New', monospace;">E = <span id="energy-value">0.0000</span> &nbsp; M = <span id="magnetization-value">+0.0000</span></span>
  <span style="color: white; margin-top: 4px;">Acceptance Ratio: <span id="acceptance-ratio">0</span></span>
  <span style="color: white; margin-top: 4px;">Sweeps/sec: <span id="sweeps-per-sec">0</span></span>
      </div>
    </div>
  </div>
    </div>
    <script type="module" src="./index.js"></script>
  </div> <!-- closes main-content div -->

  <!-- Bottom Section: About, TODO, Completed -->
  <div style="display: flex; flex-direction: row; justify-content: center; align-items: flex-start; gap: 32px; width: 100vw; max-width: 1200px; margin: 48px auto 24px auto;">
    <div style="flex: 2; min-width: 300px; display: flex; flex-direction: column;">
      <div id="simulation-description" style="background: rgba(34,34,34,0.95); color: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px #000; margin-bottom: 24px;">
        <h2 style="margin-top: 0;">About the Simulation</h2>
        <div style="min-height: 40px; font-size: 1.1em; padding: 0; background: none; border: none;">
          <p>This simulation is written in Rust and compiled to WebAssembly (WASM) for performance. 
          It implements the 2D Ising model with periodic boundaries using the Metropolis-Hastings, Glauber, and Wolff algorithms.
          The website is written in plain HTML, CSS, and JavaScript.
          </p>


          <ul style="list-style-type: disc; margin: 0; padding-left: 20px;">
            <li>T slider adjusts temperature of the simulation. Default value is the critical Temperature - approximately 2.269185 J/k (k=1 for this simulation)</li>
            <li>J slider adjusts the coupling constant between spins. The default value is 1.0.
                Positive J favors alignment (ferromagnetic) while negative J favors anti-alignment (antiferromagnetic).
            </li>
            <li>h slider adjusts the external magnetic field applied to the system. The default value is 0.0.
                Positive h favors +1 spins while negative h favors -1 spins.
            </li>
            <li>The sweeps per frame slider allows users to control how many Monte Carlo sweeps are performed between each frame update, affecting the speed of the simulation.
                The simulation speed is tied to the screen refresh rate, so it will be capped on monitors with lower refresh rates (typically 60Hz, 120Hz, or 144Hz).
                Making this value larger will speed up the simulation significantly since it will not have to render as often, but visually it will be less smooth, especially for larger lattices.
            </li>
            <li>Lattice size dropdown chooses size adjustment from 8x8 to 512x512</li>
            <li>Plot dropdown chooses which quantity to plot over time: average energy per site, average magnetization per site, or disable the plot entirely.</li>
            <li>Reset button reinitializes the lattice with random spins and resets the simulation statistics.</li>
          </ul>
          </p>
        </div>
      </div>
      <div id="model-description" style="background: rgba(34,34,34,0.95); color: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px #000;">
        <h2 style="margin-top: 0;">About the Ising Model</h2>
        <div style="min-height: 40px; font-size: 1.1em; padding: 0; background: none; border: none;">The Ising model is a mathematical model of ferromagnetism in statistical mechanics. It consists of discrete variables that represent magnetic dipole moments of atomic spins, which can be in one of two states (+1 or âˆ’1). The model helps to understand phase transitions and critical phenomena in physics.</div>
      </div>
    </div>
    <div style="flex: 1; min-width: 220px;">
      <div style="background: rgba(34,34,34,0.9); color: white; padding: 16px; border-radius: 8px; margin-bottom: 24px; box-shadow: 0 2px 8px #000;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">TODO List</h3>
        <ul style="list-style-type: disc; margin: 0; padding-left: 20px;">
          <li>Implement Swendsen-Wang algorithm</li>
          <li>Implement Kawasaki dynamics</li>
          <li>J<0 functionality for wolff and swendsen-wang</li>
          <li>Add export/save functionality for plots and data</li>
          <li>Documentation/information about algorithms</li>
          <li>Improve UI/UX design</li>
          <li>Optimize performance for larger lattices</li>
          <li>Add more plot options (e.g. specific heat, susceptibility)</li>
          <li>Ensure physics are correct for all models</li>
          <li>Code cleanup and comments</li>
          <li>Live readout for average cluster size</li>
          <li>Fix greyscale image output for cluster algorithms</li>
          <li>Better axes and higher resolution for plots</li>
          <li>Average energy and magnetization, &lt;E&gt; and &lt;M&gt; live readouts</li>
          <li>Update E and M based on local changes (Wolff, HeatBath)</li>
          <li>Add runs over specific temp values and save data</li>
        </ul>
      </div>
      <div style="background: rgba(34,34,34,0.9); color: white; padding: 16px; border-radius: 8px; box-shadow: 0 2px 8px #000;">
        <h3 style="margin-top: 0; margin-bottom: 8px;">Currently Working</h3>
        <ul style="list-style-type: disc; margin: 0; padding-left: 20px;">
          <li>All aspects of Metropolis algorithm</li>
          <li>All aspects of Wolff algorithm (h!=0 is slow)</li>
          <li>All aspects of Glauber dynamics</li>
          <li>Live image updates</li>
          <li>Live plot updates</li>
          <li>Plot selection dropdown</li>
          <li>Instantaneous E and M values</li>
          <li>Sweeps/second value</li>
          <li>Reset button</li>
          <li>Plot disable option</li>
        </ul>
      </div>
    </div>
  </div>
  </body>
</html>