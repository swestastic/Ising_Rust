<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ising Model Simulation</title>
    <style>
      body { background: #222; display: flex; justify-content: center; align-items: center; height: 100vh; }
  canvas { image-rendering: pixelated; border: 2px solid white; width: 400px; height: 400px; }
    </style>
  </head>
  <body>
  <div style="display: flex; flex-direction: column; align-items: center;">
  <label for="temp-slider" style="color: white; margin-bottom: 8px;">Temperature: 
    <input type="number" id="temp-value" min="0.1" max="5.0" step="0.01" value="2.27" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="temp-slider" min="0.1" max="5.0" step="0.01" value="2.27" style="width: 300px; margin-bottom: 16px;">
  <label for="j-slider" style="color: white; margin-bottom: 8px;">Coupling J: 
    <input type="number" id="j-value" min="-2.0" max="2.0" step="0.01" value="1.0" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="j-slider" min="-2.0" max="2.0" step="0.01" value="1.0" style="width: 300px; margin-bottom: 16px;">
  <label for="h-slider" style="color: white; margin-bottom: 8px;">External Field h: 
    <input type="number" id="h-value" min="-2.0" max="2.0" step="0.01" value="0.0" style="width: 60px; margin-left: 8px;">
  </label>
  <input type="range" id="h-slider" min="-2.0" max="2.0" step="0.01" value="0.0" style="width: 300px; margin-bottom: 16px;">
      <label for="lattice-size" style="color: white; margin-bottom: 8px;">Lattice Size:
        <select id="lattice-size" style="margin-left: 8px;">
          <option value="8">8x8</option>
          <option value="16">16x16</option>
          <option value="32">32x32</option>
          <option value="64" selected>64x64</option>
          <option value="128">128x128</option>
          <option value="256">256x256</option>
          <option value="512">512x512</option>
        </select>
      </label>
      <label for="algorithm" style="color: white; margin-bottom: 8px;">Algorithm:
        <select id="algorithm" style="margin-left: 8px;">
          <option value="metropolis" selected>Metropolis</option>
          <option value="wolff">Wolff</option>
          <!-- <option value="swendsen-wang">Swendsen-Wang (BROKEN) </option> -->
          <!-- <option value="heat-bath">Heat Bath (BROKEN) </option> -->
          <option value="glauber">Glauber</option>
          <!-- <option value="kawasaki">Kawasaki (BROKEN)</option> -->
        </select>
      </label>
  <label for="skip-slider" style="color: white; margin-bottom: 8px;">Sweeps per frame: <span id="skip-value">1</span></label>
  <input type="range" id="skip-slider" min="1" max="20" step="1" value="1" style="width: 300px; margin-bottom: 16px;">
  <button id="reset-btn" style="display: block; margin: 0 auto 16px auto;">Reset</button>
  <div style="display: flex; flex-direction: row; align-items: flex-start; gap: 24px; margin-top: 16px;">
    <canvas id="canvas"></canvas>
    <div style="display: flex; flex-direction: column; align-items: center;">
      <canvas id="energy-plot" width="400" height="400" style="width: 400px; height: 400px; background: #111; border: 2px solid white;"></canvas>
      <div style="display: flex; flex-direction: column; align-items: center; margin-top: 8px;">
        <label id="plot-label" style="color: white; margin-bottom: 8px;">
          Plot:
          <select id="plot-type" style="margin-left: 8px;">
            <option value="energy" selected>Average Energy per Site</option>
            <option value="magnetization">Average Magnetization per Site</option>
            <option value="none">None (Disable Plot)</option>
          </select>
        </label>
  <span style="color: white; font-family: 'Courier New', monospace;">E = <span id="energy-value">0.0000</span> &nbsp; M = <span id="magnetization-value">+0.0000</span></span>
  <span style="color: white; margin-top: 4px;">Acceptance Ratio: <span id="acceptance-ratio">0</span></span>
  <span style="color: white; margin-top: 4px;">Sweeps/sec: <span id="sweeps-per-sec">0</span></span>
      </div>
    </div>
  </div>
    </div>
    <script type="module" src="./index.js"></script>
  </body>
  <div style="color: white; position: absolute; top: 16px; left: 16px; background: rgba(34,34,34,0.9); padding: 16px; border-radius: 8px;">
    <h3 style="margin-top: 0; margin-bottom: 8px;">TODO List</h3>
    <ul style="list-style-type: disc; margin: 0; padding-left: 20px;">
      <li>Implement Swendsen-Wang algorithm</li>
      <li>Implement Heat Bath algorithm</li>
      <li>Implement Kawasaki dynamics</li>
      <li>J<0 functionality for wolff and swendsen-wang</li>
      <li>Add export/save functionality for plots and data</li>
      <li>Documentation/information about algorithms</li>
      <li>Improve UI/UX design</li>
      <li>Optimize performance for larger lattices</li>
      <li>Add more plot options (e.g. specific heat, susceptibility, acceptance ratio)</li>
      <li>Ensure physics are correct for all models</li>
      <li>Code cleanup and comments</li>
      <li>Live readout for average cluster size</li>
      <li>Fix greyscale image output for cluster algorithms</li>
      <li>Better axes and higher resolution for plots</li>
      <li>Average energy and magnetization, &lt;E&gt; and &lt;M&gt; live readouts</li>
      <li>Update E and M based on local changes rather than constantly sweeping the lattice</li>

    </ul>
  </div>
  <div style="color: white; position: absolute; top: 350px; left: 16px; background: rgba(34,34,34,0.9); padding: 16px; border-radius: 8px;">
    <h3 style="margin-top: 0; margin-bottom: 8px;">Currently Working</h3>
    <ul style="list-style-type: disc; margin: 0; padding-left: 20px;">
      <li>All aspects of Metropolis algorithm</li>
      <li>All aspects of Wolff algorithm (h!=0 is slow)</li>
      <li>All aspects of Glauber dynamics</li>
      <li>Live image updates</li>
      <li>Live plot updates</li>
      <li>Plot selection dropdown</li>
      <li>Instantaneous E and M values</li>
      <li>Sweeps/second value</li>
      <li>Reset button</li>
      <li>Plot disable option</li>
    </ul>
  </div>
</html>